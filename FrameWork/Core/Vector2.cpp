#include "Vector2.h"

#include <d3dx9math.h>
#include "Matrix.h"
#include "Quaternion.h"

//////////////////////////////////////////////////////////////////////////

const Vector2 Vector2::Zero = Vector2(0.0f, 0.0f);
const Vector2 Vector2::One = Vector2(1.0f, 1.0f);
const Vector2 Vector2::UnitX = Vector2(1.0f, 0.0f);
const Vector2 Vector2::UnitY = Vector2(0.0f, 1.0f);

//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief »ý¼ºÀÚ
//////////////////////////////////////////////////////////////////////////
Vector2::Vector2( void )
{
	this->X = 0.0f;
	this->Y = 0.0f;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief »ý¼ºÀÚ
///@param value : x = y = value;
//////////////////////////////////////////////////////////////////////////
Vector2::Vector2( float value )
{
	this->X = this->Y = value;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief »ý¼ºÀÚ
///@param x : X
///@param y : Y
//////////////////////////////////////////////////////////////////////////
Vector2::Vector2( float x, float y )
{
	this->X = x;
	this->Y = y;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief -
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator-( void )
{
	Vector2 vector2;
	vector2.X = -this->X;
	vector2.Y = -this->Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ==
///@param value2 : º¤ÅÍ
///@return °á°ú
//////////////////////////////////////////////////////////////////////////
bool Vector2::operator==( const Vector2& value2 ) const
{
	if((double)this->X == (double)value2.X)
		return (double)this->Y == (double)value2.Y;
	else
		return false;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief !=
///@param value2 : º¤ÅÍ
///@return °á°ú
//////////////////////////////////////////////////////////////////////////
bool Vector2::operator!=( const Vector2& value2 ) const
{
	if((double)this->X == (double)value2.X)
		return (double)this->Y != (double)value2.Y;
	else
		return true;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief +
///@param value2 : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator+( const Vector2& value2 ) const
{
	Vector2 vector2;
	vector2.X = this->X + value2.X;
	vector2.Y = this->Y + value2.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief -
///@param value2 : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator-( const Vector2& value2 ) const
{
	Vector2 vector2;
	vector2.X = this->X - value2.X;
	vector2.Y = this->Y - value2.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief *
///@param value2 : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator*( const Vector2& value2 ) const
{
	Vector2 vector2;
	vector2.X = this->X * value2.X;
	vector2.Y = this->Y * value2.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief *
///@param scaleFactor : °ª
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator*( const float& scaleFactor ) const
{
	Vector2 vector2;
	vector2.X = this->X * scaleFactor;
	vector2.Y = this->Y * scaleFactor;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief /
///@param value2 : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator/( const Vector2& value2 ) const
{
	Vector2 vector2;
	vector2.X = this->X / value2.X;
	vector2.Y = this->Y / value2.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief /
///@param divider : °ª
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::operator/( const float& divider ) const
{
	float num = 1.0f / divider;

	Vector2 vector2;
	vector2.X = this->X * num;
	vector2.Y = this->Y * num;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief +=
///@param value2 : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
void Vector2::operator+=( const Vector2& value2 )
{
	*this = *this + value2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief -=
///@param value2 : º¤ÅÍ 
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
void Vector2::operator-=( const Vector2& value2 )
{
	*this = *this - value2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief *=
///@param value2 : º¤ÅÍ 
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
void Vector2::operator*=( const Vector2& value2 )
{
	*this = *this * value2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief /=
///@param scaleFactor : °ª
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
void Vector2::operator*=( const float& scaleFactor )
{
	*this = *this * scaleFactor;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief /=
///@param value2 : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
void Vector2::operator/=( const Vector2& value2 )
{
	*this = *this / value2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief /=
///@param divider : °ª
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
void Vector2::operator/=( const float& divider )
{
	*this = *this / divider;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ¹®ÀÚ¿­·Î º¯È¯
///@return ¹®ÀÚ¿­
//////////////////////////////////////////////////////////////////////////
std::string Vector2::ToString()
{
	std::string temp;
	char val[255];

	sprintf(val, "{X:%#f ", X); temp += val; 
	sprintf(val, "Y:%#f}", Y); temp += val;

	return temp;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief D3DXVECTOR2·Î º¯È¯
///@return D3DX º¤ÅÍ 
//////////////////////////////////////////////////////////////////////////
D3DXVECTOR2 Vector2::ToD3DXVECTOR2()
{
	D3DXVECTOR2 vector2;
	vector2.x = X;
	vector2.y = Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief Å©±â °è»ê
///@return °á°ú °ª
//////////////////////////////////////////////////////////////////////////
float Vector2::Length()
{
	return (float)sqrt((double)this->X * (double)this->X + (double)this->Y * (double)this->Y);
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief Á¦°öÀ¸·Î Å©±â °è»ê
///@return °á°ú °ª
//////////////////////////////////////////////////////////////////////////
float Vector2::LengthSquared()
{
	return (float)((double)this->X * (double)this->X + (double)this->Y * (double)this->Y);
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief Á¤±ÔÈ­
//////////////////////////////////////////////////////////////////////////
void Vector2::Normalize()
{
	float num = 1.0f / (float)sqrt((double)this->X * (double)this->X + (double)this->Y * (double)this->Y);

	this->X *= num;
	this->Y *= num;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief °Å¸®°è»ê
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@return °á°ú °ª
//////////////////////////////////////////////////////////////////////////
float Vector2::Distance( Vector2 value1, Vector2 value2 )
{
	float num1 = value1.X - value2.X;
	float num2 = value1.Y - value2.Y;

	return (float)sqrt((double)num1 * (double)num1 + (double)num2 * (double)num2);
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief Á¦°öÀ¸·Î °Å¸®°è»ê
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@return °á°ú °ª
//////////////////////////////////////////////////////////////////////////
float Vector2::DistanceSquared( Vector2 value1, Vector2 value2 )
{
	float num1 = value1.X - value2.X;
	float num2 = value1.Y - value2.Y;

	return (float)((double)num1 * (double)num1 + (double)num2 * (double)num2);
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ³»Àû °è»ê
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@return °á°ú °ª
//////////////////////////////////////////////////////////////////////////
float Vector2::Dot( Vector2 value1, Vector2 value2 )
{
	return (float)((double)value1.X * (double)value2.X + (double)value1.Y * (double)value2.Y);
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief Á¤±ÔÈ­
///@param value : º¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Normalize( Vector2 value )
{
	float num = 1.0f / (float)sqrt((double)value.X * (double)value.X + (double)value.Y * (double)value.Y);
	
	Vector2 vector2;
	vector2.X = value.X * num;
	vector2.Y = value.Y * num;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ¹Ý»ç°ª
///@param vector : º¤ÅÍ
///@param normal : ³ë¸Öº¤ÅÍ
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Reflect( Vector2 vector, Vector2 normal )
{
	float num = (float)((double)vector.X * (double)normal.X + (double)vector.Y * (double)normal.Y);

	Vector2 vector2;
	vector2.X = vector.X - 2.0f * num * normal.X;
	vector2.Y = vector.Y - 2.0f * num * normal.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief µÎ º¤ÅÍ Áß ÀÛÀº º¤ÅÍ
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Min( Vector2 value1, Vector2 value2 )
{
	Vector2 vector2;
	vector2.X = (double)value1.X < (double)value2.X ? value1.X : value2.X;
	vector2.Y = (double)value1.Y < (double)value2.Y ? value1.Y : value2.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief µÎ º¤ÅÍ Áß Å« º¤ÅÍ
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Max( Vector2 value1, Vector2 value2 )
{
	Vector2 vector2;
	vector2.X = (double)value1.X > (double)value2.X ? value1.X : value2.X;
	vector2.Y = (double)value1.Y > (double)value2.Y ? value1.Y : value2.Y;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ÇØ´ç º¤ÅÍ°¡ ÃÖ¼Ò°ªº¸´Ù ÀÛÀ» °æ¿ì ÃÖ¼Ò°ª, ¹Ý´ëÀÇ °æ¿ì ÃÖ´ë°ª
///@param value1 : º¤ÅÍ
///@param min : ÃÖ¼Ò°ª º¤ÅÍ
///@param max : ÃÖ´ë°ª º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Clamp( Vector2 value1, Vector2 min, Vector2 max )
{
	float num1 = value1.X;
	float num2 = (double) num1 > (double) max.X ? max.X : num1;
	float num3 = (double) num2 < (double) min.X ? min.X : num2;

	float num4 = value1.Y;
	float num5 = (double) num4 > (double) max.Y ? max.Y : num4;
	float num6 = (double) num5 < (double) min.Y ? min.Y : num5;

	Vector2 vector2;
	vector2.X = num3;
	vector2.Y = num6;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief µÎ º¤ÅÍÀÇ ¼±Çüº¸°£
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@param amount : º¸°£°ª
///@return °á°úº¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Lerp( Vector2 value1, Vector2 value2, float amount )
{
	Vector2 vector2;
	vector2.X = value1.X + (value2.X - value1.X) * amount;
	vector2.Y = value1.Y + (value2.Y - value1.Y) * amount;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief µÎ º¤ÅÍ¸¦ ºÎµå·´°Ô º¸°£
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@param amount : º¸°£°ª
///@return °á°úº¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::SmoothStep( Vector2 value1, Vector2 value2, float amount )
{
	amount = (double)amount > 1.0 ? 1.0f : ((double)amount < 0.0 ? 0.0f : amount);
	amount = (float)((double)amount * (double)amount * (3.0 - 2.0 * (double)amount));

	Vector2 vector2;
	vector2.X = value1.X + (value2.X - value1.X) * amount;
	vector2.Y = value1.Y + (value2.Y - value1.Y) * amount;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief Ä«Æ®¹Ä-·Ò º¸°£
///@param value1 : º¤ÅÍ1
///@param value2 : º¤ÅÍ2
///@param value3 : º¤ÅÍ3
///@param value4 : º¤ÅÍ4
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::CatmullRom( Vector2 value1, Vector2 value2, Vector2 value3, Vector2 value4, float amount )
{
	float num1 = amount * amount;
	float num2 = amount * num1;

	Vector2 vector2;
	vector2.X = (float)(0.5 * (2.0 * (double)value2.X + (-(double)value1.X + (double)value3.X)* (double)amount + (2.0 * (double)value1.X - 5.0 * (double)value2.X + 4.0 * (double)value3.X - (double)value4.X)* (double)num1 + (-(double)value1.X + 3.0 * (double)value2.X - 3.0 * (double)value3.X + (double)value4.X)* (double)num2));
	vector2.Y = (float)(0.5 * (2.0 * (double)value2.Y + (-(double)value1.Y + (double)value3.Y)* (double)amount + (2.0 * (double)value1.Y - 5.0 * (double)value2.Y + 4.0 * (double)value3.Y - (double)value4.Y)* (double)num1 + (-(double)value1.Y + 3.0 * (double)value2.Y - 3.0 * (double)value3.Y + (double)value4.Y)* (double)num2));

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ¿¡¸£¹ÌÆ® º¸°£
///@param value1 : º¤ÅÍ1
///@param tagent1 : º¤ÅÍ1ÀÇ ÅºÁ¨Æ® º¤ÅÍ
///@param value2 : º¤ÅÍ2
///@param tagent2 : º¤ÅÍ2 ÅºÁ¨Æ® º¤ÅÍ
///@param amount : º¸°£°ª
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Hermite( Vector2 value1, Vector2 tangent1, Vector2 value2, Vector2 tangent2, float amount )
{
	float num1 = amount * amount;
	float num2 = amount * num1;
	float num3 = (float)(2.0 * (double)num2 - 3.0 * (double)num1 + 1.0);
	float num4 = (float)(-2.0 * (double)num2 + 3.0 * (double)num1);
	float num5 = num2 - 2.0f * num1 + amount;
	float num6 = num2 - num1;

	Vector2 vector2;
	vector2.X = (float)((double)value1.X * (double)num3 + (double)value2.X * (double)num4 + (double)tangent1.X * (double)num5 + (double)tangent2.X * (double)num6);
	vector2.Y = (float)((double)value1.Y * (double)num3 + (double)value2.Y * (double)num4 + (double)tangent1.Y * (double)num5 + (double)tangent2.Y * (double)num6);

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ¸ÅÆ®¸¯½º¿¡ ÀÇÇÑ º¤ÅÍ º¯È¯
///@param position : º¤ÅÍ
///@param matrix : ¸ÅÆ®¸¯½º
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Transform( Vector2 position, Matrix matrix )
{
	float num1 = (float)((double)position.X * (double)matrix.M11 + (double)position.Y * (double)matrix.M21) + matrix.M41;
	float num2 = (float)((double)position.X * (double)matrix.M12 + (double)position.Y * (double)matrix.M22) + matrix.M42;

	Vector2 vector2;
	vector2.X = num1;
	vector2.Y = num2;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ÄõÅÍ´Ï¿Â¿¡ ÀÇÇÑ º¤ÅÍº¯È¯
///@param value : º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::Transform( Vector2 value, Quaternion rotation )
{
	float num1 = rotation.X + rotation.X;
	float num2 = rotation.Y + rotation.Y;
	float num3 = rotation.Z + rotation.Z;

	float num4 = rotation.W * num3;
	float num5 = rotation.X * num1;
	float num6 = rotation.X * num2;
	float num7 = rotation.Y * num2;
	float num8 = rotation.Z * num3;

	float num9 = (float) ((double) value.X * (1.0 - (double) num7 - (double) num8) + (double) value.Y * ((double) num6 - (double) num4));
	float num10 = (float) ((double) value.X * ((double) num6 + (double) num4) + (double) value.Y * (1.0 - (double) num5 - (double) num8));

	Vector2 vector2;
	vector2.X = num9;
	vector2.Y = num10;

	return vector2;
}
//////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///@brief ¸ÅÆ®¸¯½º¿¡ ÀÇÇÑ ³ë¸Öº¤ÅÍ º¯È¯
///@param normal : ¹ý¼± º¤ÅÍ
///@param matrix : ¸ÅÆ®¸¯½º
///@return °á°ú º¤ÅÍ
//////////////////////////////////////////////////////////////////////////
Vector2 Vector2::TransformNormal( Vector2 normal, Matrix matrix )
{
	float num1 = (float)((double)normal.X * (double)matrix.M11 + (double)normal.Y * (double)matrix.M21);
	float num2 = (float)((double)normal.X * (double)matrix.M12 + (double)normal.Y * (double)matrix.M22);

	Vector2 vector2;
	vector2.X = num1;
	vector2.Y = num2;

	return vector2;
}